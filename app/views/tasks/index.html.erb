<h1><%= t('tasks.index.title') %></h1>

<!-- 検索フォーム -->
<%= form_with(url: tasks_path, method: :get, scope: :search, local: true) do |form| %>
    <div>
        <%= form.label :title, 'タイトル' %>
        <%= form.text_field :title %>
    </div>

    <div>
        <%= form.label :status, 'ステータス' %>
        <%= form.select :status, options_for_select([['未着手', '0'], ['着手中', '1'], ['完了', '2']], selected: ''), prompt: '' %>
    </div>

    <div>
        <%= form.submit '検索', id: 'search_task' %>
    </div>
<% end %>

<table>
    <thead>
        <tr>
            <th><%=  Task.human_attribute_name(:title) %></th>
            <th><%=  Task.human_attribute_name(:content) %></th>
            <th><%=  Task.human_attribute_name(:created_at) %></th>
            <th><%= link_to Task.human_attribute_name(:deadline_on), tasks_path(sorted_deadline_on: true) %></th>
            <th><%= link_to Task.human_attribute_name(:priority), tasks_path(sorted_priority: true) %></th>
            <th><%=  Task.human_attribute_name(:status) %></th>
            <th colspan="3"></th>
        </tr>
    </thead>

    <tbody>
        <% @tasks.each do |task| %>
        <tr>
            <td><%= task.title %></td>
            <td><%= task.content %></td>
            <td><%= l(task.created_at, format: :default) %></td>
            <td><%= task.deadline_on %></td>
            <td><%= task.priority_i18n %></td>
            <td><%= task.status_i18n %></td>
            <td><%= link_to t('helpers.submit.show'), task, id: 'show-task' %></td>
            <td><%= link_to t('helpers.submit.edit'), edit_task_path(task), id: 'edit-task' %></td>
            <td><%= link_to t('helpers.submit.destroy'), task, method: :delete, data: { confirm: t('helpers.confirm.destroy') }, id: 'destroy-task' %></td>
        </tr>
        <% end %>
    </tbody>
</table>
<%= paginate @tasks %>
